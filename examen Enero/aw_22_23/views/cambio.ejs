<!DOCTYPE html>
<html>
  <head>
    <title>Examen de 10</title>
    <!-- <script href='javascripts/bootstrap.min.css'></script> -->
    <script src='/javascripts/jquery.min.js'></script>
    <link rel="script" href='/javascripts/jquery.min.css'/>
    <link rel='stylesheet' href='/stylesheets/bootstrap.min.css' />
  </head>
  <body>
    <div class="bg-info p-4 m-4">
      <form action="/changePasswordThisTimeIsTheOneAndOnly/<%=user%>" method="POST">
        <div class="col">
          <div class="row justify-content-center">
            <h1>Cambiar contraseña</h1>
          </div>
          <div class="row">
            <label>Contraseña nueva:</label>
          </div>
          <div class="row">
            <input id="password" class="w-100" type="text" name="password">
            <p id="errorMessage" class="d-none" style="color:red">La contraseña debe contener 5 caracteres de los cuales 3 mayusculas y dos digitos</p>
          </div>
          <div class="row">
            <label>Repetir contraseña:</label>
          </div>
          <div class="row">
            <input id="confirmPassword" class="w-100" type="password" name="confirmPassword">
            <p id="errorConfirmMessage" class="d-none" style="color:red">Las contraseña deben coincidir</p>
          </div>
          <br>
          <div class="row justify-content-center">
            <button class="btn btn-primary ">submit</button>
          </div>
        </div>
        
        <a class="d-none" id-data="3">
      </form>
      
    </div>
  </body>
  <script>
    let capitalCheck= /^(.*[A-Z]){3}/
    let digitalCheck= /^(.*\d){2}/
    let sizeCheck = /.{5,}$/
    $("#password").on("blur", function() {
        if((sizeCheck.test($("#password").val())) && (digitalCheck.test($("#password").val())) && (capitalCheck.test($("#password").val()))) {
          $("#errorMessage").addClass("d-none")
        } else {
          $("#errorMessage").removeClass("d-none")
        }
    }) 
    $("#confirmPassword").on("change", function() {
      if($("#password").val() !== $("#confirmPassword").val()) {  
        $("#errorConfirmMessage").removeClass("d-none")
      } else {
        $("#errorConfirmMessage").addClass("d-none")
      }
  }) 


  </script>
</html>
